---
import { Image } from 'astro:assets';
import Link from './ui/Link.astro';
import Badge from './ui/Badge.astro';
import { slugify } from '../lib/jobs';

export interface Props {
  company: {
    name: string;
    logo: string;
    location?: string;
    website?: string;
  };
  jobCount: number;
  class?: string;
}

const { company, jobCount, class: className } = Astro.props;

const logoAlt = `${company.name} logo`;
const companyLogo = company.logo || '/images/company-placeholder.svg';
---

<div class:list={["flex flex-col border-2 border-ink bg-white shadow-hard relative", className]}>
    <!-- Accent Line (Brazil Blue for companies) -->
    <div class="h-4 w-full md:w-4 md:h-auto md:absolute md:left-0 md:top-0 md:bottom-0 border-b-2 md:border-b-0 md:border-r-2 border-ink bg-brazil-blue"></div>
    
    <div class="flex-1 p-6 md:pl-10 flex flex-col gap-6">
        <div class="flex flex-col md:flex-row md:items-start justify-between gap-6">
            <div class="flex items-start gap-6">
                <div class="h-20 w-20 md:h-24 md:w-24 flex-shrink-0 border-2 border-ink bg-white shadow-hard-sm flex items-center justify-center p-2">
                    <img src={companyLogo} alt={logoAlt} loading="lazy" class="h-full w-full object-contain" />
                </div>
                <div>
                    <h1 class="font-display text-3xl md:text-4xl font-bold leading-tight text-ink">{company.name}</h1>
                    <div class="flex flex-wrap gap-4 mt-2 text-sm font-bold uppercase tracking-wider text-neutral-600">
                        {company.location && (
                            <span class="flex items-center gap-2 text-ink">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                                {company.location}
                            </span>
                        )}
                        <span class="flex items-center gap-2 text-ink">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            {jobCount} {jobCount === 1 ? 'Vaga' : 'Vagas'}
                        </span>
                    </div>
                    {company.website && (
                        <div class="mt-3">
                            <Link href={company.website} variant="primary" external>
                                Visitar Site
                            </Link>
                        </div>
                    )}
                </div>
            </div>
        </div>
    </div>
</div>
